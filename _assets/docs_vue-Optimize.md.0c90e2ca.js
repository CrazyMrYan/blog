import{g as n,j as s,l as a,f as t,q as l}from"./common-bec3f312.js";const e='{"title":"如何优化 祖传代码","frontmatter":{"date":"2020-12-29","title":"如何优化 祖传代码","tags":["Vue","性能优化"],"describe":"“这页面加载也太慢了！”，一个宁静的下午就此打破，在老板和 PM 的 \\"威逼利诱之下\\" ，我开始了对这个祖传(shi)山项目进行了优化"},"headers":[{"level":2,"title":"目录","slug":"目录"},{"level":2,"title":"前言","slug":"前言"},{"level":2,"title":"为什么要优化？","slug":"为什么要优化？"},{"level":2,"title":"从哪里开始下手","slug":"从哪里开始下手"},{"level":2,"title":"现在开始","slug":"现在开始"},{"level":3,"title":"1.代码压缩","slug":"_1-代码压缩"},{"level":3,"title":"2.删除一些废弃的页面","slug":"_2-删除一些废弃的页面"},{"level":3,"title":"3. 使用cdn开始性能优化","slug":"_3-使用cdn开始性能优化"},{"level":3,"title":"4.修改路由引入方式","slug":"_4-修改路由引入方式"},{"level":2,"title":"结果","slug":"结果"}],"relativePath":"docs/vue-Optimize.md","lastUpdated":1609381110763.6243}';var o={};const p=s("h2",{id:"目录"},[s("a",{class:"header-anchor",href:"#目录","aria-hidden":"true"},"#"),a(" 目录")],-1),c=s("ul",null,[s("li",null,"前言"),s("li",null,"为什么要优化"),s("li",null,"从哪里开始下手"),s("li",null,[a("现在开始 "),s("ul",null,[s("li",null,"1.代码压缩"),s("li",null,"2.删除一些废弃的页面"),s("li",null,"3.使用 cdn 优化"),s("li",null,"4.修改路由引入方式")])]),s("li",null,"结果")],-1),u=s("h2",{id:"前言"},[s("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#"),a(" 前言")],-1),i=s("blockquote",null,[s("p",null,[a("“这页面加载也太慢了！”，一个宁静的下午就此打破，在老板和 PM 的 "),s("code",null,"威逼利诱之下"),a(" ，我开始了对这个祖传(shi)山项目进行了优化，因为这个项目传到我手上至少经过了4-5代前端了，很多东西也不敢随意删，找不到负责人。")])],-1),r=s("img",{src:"http://ww2.sinaimg.cn/large/006APoFYjw1f8zf375pm1j30m80m8aal.jpg",style:{zoom:"25%"}},null,-1),k=s("h2",{id:"为什么要优化？"},[s("a",{class:"header-anchor",href:"#为什么要优化？","aria-hidden":"true"},"#"),a(" 为什么要优化？")],-1),g=s("p",null,[a("我们主要看首屏加载速度，在测试环境我们项目其实跑得还是蛮快，但是生产环境是用印尼比较差的服务器，再加上需要 kexue 上网（总是网络出现波动），在这次 UI 2.0 上线之后，堆积的东西终于越来越多，项目也越来越庞大。毫不夸张的说我们现在使用 "),s("code",null,"4G"),a(" 首次打开页面的速度大概在 16 秒以上，根据下面的表格推断出客户流失率，可是在印尼还在用着 "),s("code",null,"3G"),a(" 网络，可想而知这流失率太恐怖了。并且这是一个 C 端产品，所以要更加考虑用户体验了")],-1),d=s("p",null,[s("strong",null,"客户等待页面时长的流失率")],-1),m=s("p",null,[s("img",{src:"/blog/_assets/image-20201229141952707.ce54c38a.png",alt:""})],-1),h=s("p",null,[s("img",{src:"http://ww2.sinaimg.cn/large/9150e4e5gy1gcj7zauyotj2058034t8i.jpg",alt:""})],-1),b=s("p",null,"作为一个开发者，你对首页打开速度又有多高的要求呢？",-1),f=s("h2",{id:"从哪里开始下手"},[s("a",{class:"header-anchor",href:"#从哪里开始下手","aria-hidden":"true"},"#"),a(" 从哪里开始下手")],-1),v=s("p",null,"在观察了这个项目架构之后呢，我推断出以下几个可行方案",-1),w=s("ol",null,[s("li",null,"对于代码打包进行压缩"),s("li",null,"废除以前不该用到的组件及页面"),s("li",null,"使用 CDN 引入部分资源"),s("li",null,"优化路由，修改引入方式")],-1),j=s("p",null,"对于这几个优化方案，也是试了一遍又一遍。确实是效果挺大的才发出来给大家围观一下",-1),y=s("p",null,[s("img",{src:"http://ww1.sinaimg.cn/large/6af89bc8gw1f8u8aub08bj208c08cmxd.jpg",alt:""})],-1),_=s("h2",{id:"现在开始"},[s("a",{class:"header-anchor",href:"#现在开始","aria-hidden":"true"},"#"),a(" 现在开始")],-1),x=s("p",null,"记住这张图中三个比较大的文件 size, 我们每进行一步方案就看看效果",-1),z=s("p",null,[s("img",{src:"/blog/_assets/image-20201229145746884.f96de13f.png",alt:""})],-1),q=s("h3",{id:"_1-代码压缩"},[s("a",{class:"header-anchor",href:"#_1-代码压缩","aria-hidden":"true"},"#"),a(" 1.代码压缩")],-1),P=s("p",null,"代码压缩是一个很不错选择，我们首先需要下载一些依赖",-1),S=s("p",null,[s("strong",null,"css 代码压缩 (optimize-css-assets-webpack-plugin)")],-1),M=s("p",null,"下载",-1),A=s("div",{class:"language-shell"},[s("pre",null,[s("code",null,[s("span",{class:"token function"},"npm"),a(),s("span",{class:"token function"},"install"),a(" optimize-css-assets-webpack-plugin\n")])])],-1),C=s("p",null,"webpack.config.js 使用",-1),D=s("div",{class:"language-js"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(" OptimizeCSSPlugin "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'optimize-css-assets-webpack-plugin'"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),a("\nplugins"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"["),a("\n    "),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"OptimizeCSSPlugin"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"]"),a("\n")])])],-1),I=s("p",null,[s("strong",null,"js 代码压缩 (uglifyjs-webpack-plugin)")],-1),O=s("p",null,"下载",-1),U=s("div",{class:"language-shell"},[s("pre",null,[s("code",null,[s("span",{class:"token function"},"npm"),a(),s("span",{class:"token function"},"install"),a(" optimize-css-assets-webpack-plugin\n")])])],-1),V=s("p",null,"webpack.config.js 使用",-1),R=s("div",{class:"language-js"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(" UglifyJsPlugin "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'uglifyjs-webpack-plugin'"),s("span",{class:"token punctuation"},")"),a("\nplugins"),s("span",{class:"token operator"},":"),s("span",{class:"token punctuation"},"["),a("\n      "),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"UglifyJsPlugin"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n      cache"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("   "),s("span",{class:"token comment"},"// 开启缓存"),a("\n      parallel"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token comment"},"// 开启多线程编译"),a("\n      sourceMap"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("  "),s("span",{class:"token comment"},"// 是否sourceMap"),a("\n      uglifyOptions"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("  "),s("span",{class:"token comment"},"// 丑化参数"),a("\n        comments"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"false"),s("span",{class:"token punctuation"},","),a("\n        warnings"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"false"),s("span",{class:"token punctuation"},","),a("\n        compress"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n          unused"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("\n          dead_code"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("\n          collapse_vars"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),a("\n          reduce_vars"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"true"),a("\n        "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n        output"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token punctuation"},"{"),a("\n          comments"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token boolean"},"false"),a("\n        "),s("span",{class:"token punctuation"},"}"),a("\n      "),s("span",{class:"token punctuation"},"}"),a("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},","),a("\n"),s("span",{class:"token punctuation"},"]"),a("\n")])])],-1),E=s("p",null,[s("strong",null,"开启gzip")],-1),G=s("p",null,"安装",-1),J=s("div",{class:"language-shell"},[s("pre",null,[s("code",null,[s("span",{class:"token function"},"npm"),a(),s("span",{class:"token function"},"install"),a(" compression-webpack-plugin\n")])])],-1),N=s("p",null,"webpack.config.js 使用",-1),W=s("div",{class:"language-js"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"const"),a(" CompressionWebpackPlugin "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'compression-webpack-plugin'"),s("span",{class:"token punctuation"},")"),a("\nplugins"),s("span",{class:"token operator"},":"),s("span",{class:"token punctuation"},"["),a("\n    "),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"CompressionWebpackPlugin"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"{"),a("\n      asset"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'[path].gz[query]'"),s("span",{class:"token punctuation"},","),a("\n      algorithm"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},"'gzip'"),s("span",{class:"token punctuation"},","),a("\n      test"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token keyword"},"new"),a(),s("span",{class:"token class-name"},"RegExp"),s("span",{class:"token punctuation"},"("),a("\n        "),s("span",{class:"token string"},"'\\\\.('"),a(),s("span",{class:"token operator"},"+"),a("\n        "),s("span",{class:"token punctuation"},"["),s("span",{class:"token string"},"'js'"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'css'"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"."),s("span",{class:"token function"},"join"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"'|'"),s("span",{class:"token punctuation"},")"),a(),s("span",{class:"token operator"},"+"),a("\n        "),s("span",{class:"token string"},"')$'"),a("\n      "),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},","),a("\n      threshold"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"10240"),s("span",{class:"token punctuation"},","),a("\n      minRatio"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token number"},"0.8"),a("\n\t"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},")"),a("\n"),s("span",{class:"token punctuation"},"]"),a("\n")])])],-1),F=s("p",null,"nginx 配置",-1),T=s("div",{class:"language-nginx"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"gzip"),a(" on"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"gzip_static"),a(" on"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"gzip_min_length"),a(),s("span",{class:"token number"},"1"),a("k"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"gzip_buffers"),a(),s("span",{class:"token number"},"4"),a(),s("span",{class:"token number"},"32"),a("k"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"gzip_http_version"),a(),s("span",{class:"token number"},"1.1"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"gzip_comp_level"),a(),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"gzip_types"),a(" text"),s("span",{class:"token operator"},"/"),a("plain application"),s("span",{class:"token operator"},"/"),a("x"),s("span",{class:"token operator"},"-"),a("javascript text"),s("span",{class:"token operator"},"/"),a("css application"),s("span",{class:"token operator"},"/"),a("xml"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"gzip_vary"),a(" on"),s("span",{class:"token punctuation"},";"),a("\n"),s("span",{class:"token keyword"},"gzip_disable"),a(),s("span",{class:"token string"},'"MSIE [1-6]."'),s("span",{class:"token punctuation"},";"),a("\n")])])],-1),Y=s("p",null,"先看看效果",-1),$=s("p",null,[s("img",{src:"/blog/_assets/image-20201229154211887.38606fa7.png",alt:""})],-1),B=s("p",null,"我们在第一步就差不多减少了 1/2 的大小",-1),H=s("p",null,[s("img",{src:"http://ww3.sinaimg.cn/large/6af89bc8gw1f8sbpnsmkgj205i04st8i.jpg",alt:""})],-1),K=s("p",null,"接着往下看",-1),L=s("h3",{id:"_2-删除一些废弃的页面"},[s("a",{class:"header-anchor",href:"#_2-删除一些废弃的页面","aria-hidden":"true"},"#"),a(" 2.删除一些废弃的页面")],-1),Q=s("p",null,"这个项目因为之前是一直迭代过来的，在前面也有讲到，但是我还是下定决心删除它们，在截取了一系列屏之后，我找到了老员工 与 PM 来确认页面是否已经废弃，这个环境比较费时间，这下面的表格就是一个个确认出来的",-1),X=s("p",null,[s("img",{src:"/blog/_assets/image-20201229155112020.a24070fc.png",alt:""})],-1),Z=s("p",null,"在删除这些路由之后我重新进行了打包，请看下面，还是有点效果的嘛，但这并没有达到我的预期效果",-1),nn=s("p",null,[s("img",{src:"/blog/_assets/image-20201229154828679.036ece17.png",alt:""})],-1),sn=s("h3",{id:"_3-使用cdn开始性能优化"},[s("a",{class:"header-anchor",href:"#_3-使用cdn开始性能优化","aria-hidden":"true"},"#"),a(" 3. 使用cdn开始性能优化")],-1),an=s("p",null,[a("我们当前使用了 mint ui 库，vue 全家桶 一系列玩意，我们找到对应的 "),s("code",null,"cdn"),a(" 在index.html中引入")],-1),tn=s("div",{class:"language-html"},[s("pre",null,[s("code",null,[s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),a("script")]),a(),s("span",{class:"token attr-name"},"src"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),a("https://cdn.bootcdn.net/ajax/libs/vue/3.0.2/vue.cjs.js"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")]),s("span",{class:"token script"}),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),a("script")]),s("span",{class:"token punctuation"},">")]),a("\n"),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),a("script")]),a(),s("span",{class:"token attr-name"},"src"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),a("https://cdn.bootcdn.net/ajax/libs/mint-ui/2.2.9/actionsheet/index.js"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")]),s("span",{class:"token script"}),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),a("script")]),s("span",{class:"token punctuation"},">")]),a("\n"),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),a("script")]),a(),s("span",{class:"token attr-name"},"src"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),a("https://cdn.bootcdn.net/ajax/libs/axios/0.21.0/axios.js"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")]),s("span",{class:"token script"}),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),a("script")]),s("span",{class:"token punctuation"},">")]),a("\n"),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),a("script")]),a(),s("span",{class:"token attr-name"},"src"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),a("https://cdn.bootcdn.net/ajax/libs/vue-router/3.4.8/vue-router.common.js"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")]),s("span",{class:"token script"}),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),a("script")]),s("span",{class:"token punctuation"},">")]),a("\n"),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"<"),a("script")]),a(),s("span",{class:"token attr-name"},"src"),s("span",{class:"token attr-value"},[s("span",{class:"token punctuation attr-equals"},"="),s("span",{class:"token punctuation"},'"'),a("https://cdn.bootcdn.net/ajax/libs/vue-i18n/8.22.1/vue-i18n.common.js"),s("span",{class:"token punctuation"},'"')]),s("span",{class:"token punctuation"},">")]),s("span",{class:"token script"}),s("span",{class:"token tag"},[s("span",{class:"token tag"},[s("span",{class:"token punctuation"},"</"),a("script")]),s("span",{class:"token punctuation"},">")]),a("\n")])])],-1),ln=s("p",null,"引入完之后呢？将不需要打包的资源进行相应的配置，所以我们需要在 webpack.config.js 中写上",-1),en=s("div",{class:"language-js"},[s("pre",null,[s("code",null,[a("externals"),s("span",{class:"token operator"},":"),s("span",{class:"token punctuation"},"{"),a("\n    "),s("span",{class:"token string"},"'vue'"),s("span",{class:"token operator"},":"),s("span",{class:"token string"},"'Vue'"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token string"},"'mint-ui'"),s("span",{class:"token operator"},":"),s("span",{class:"token string"},"'MINT'"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token string"},"'axios'"),s("span",{class:"token operator"},":"),s("span",{class:"token string"},"'axios'"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token string"},"'vue-router'"),s("span",{class:"token operator"},":"),s("span",{class:"token string"},"'VueRouter'"),s("span",{class:"token punctuation"},","),a("\n    "),s("span",{class:"token string"},"'vue-i18n'"),s("span",{class:"token operator"},":"),s("span",{class:"token string"},"'VueI18n'"),s("span",{class:"token punctuation"},","),a("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a("\n")])])],-1),on=s("p",null,"这样就可以用来忽略这些资源了",-1),pn=s("p",null,[s("img",{src:"/blog/_assets/image-20201229160242008.eb8bf5bc.png",alt:""})],-1),cn=s("h3",{id:"_4-修改路由引入方式"},[s("a",{class:"header-anchor",href:"#_4-修改路由引入方式","aria-hidden":"true"},"#"),a(" 4.修改路由引入方式")],-1),un=s("p",null,[a("老严将页面的组件（去除之前删除的页面）数了一下是 73个，一般使用 "),s("code",null,"import"),a(" 引入的写法，当项目打包时路由里的所有 "),s("code",null,"component"),a(" 都会打包在一个js中，在项目刚进入首页的时候，就会加载所有的组件，所以导致首页加载较慢")],-1),rn=s("p",null,[s("code",null,"import "),a(" 引入")],-1),kn=s("div",{class:"language-js"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"import"),a(" DetailActivityStatic "),s("span",{class:"token keyword"},"from"),a(),s("span",{class:"token string"},"'@/components/discover/share/DetailActivityStatic'"),a("\n\n"),s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"default"),a(),s("span",{class:"token punctuation"},"["),a("\n    "),s("span",{class:"token punctuation"},"{"),a("\n    \tpath"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"/discover/DetailActivityStatic"'),s("span",{class:"token punctuation"},","),a("\n    \tcomponent"),s("span",{class:"token operator"},":"),a(" DetailActivityStatic\n\t"),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"]"),a("\n")])])],-1),gn=s("p",null,[a("现在老严全部改为 使用 "),s("code",null,"require")],-1),dn=s("div",{class:"language-js"},[s("pre",null,[s("code",null,[s("span",{class:"token keyword"},"export"),a(),s("span",{class:"token keyword"},"default"),a(),s("span",{class:"token punctuation"},"["),a("\n    "),s("span",{class:"token punctuation"},"{"),a("\n        path"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token string"},'"/discover/DetailActivityStatic"'),s("span",{class:"token punctuation"},","),a("\n        "),s("span",{class:"token function-variable function"},"component"),s("span",{class:"token operator"},":"),a(),s("span",{class:"token parameter"},"resolve"),a(),s("span",{class:"token operator"},"=>"),a(),s("span",{class:"token function"},"require"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},"["),s("span",{class:"token string"},"'@/components/discover/share/DetailActivityStatic'"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),a(" resolve"),s("span",{class:"token punctuation"},")"),a("\n    "),s("span",{class:"token punctuation"},"}"),a("\n"),s("span",{class:"token punctuation"},"]"),a("\n")])])],-1),mn=s("p",null,"这个环节也有点累，因为页面实在太多了，下面是打包后的效果",-1),hn=s("p",null,[s("img",{src:"/blog/_assets/image-20201229161643521.6c0a5404.png",alt:""})],-1),bn=s("p",null,"我们惊奇的发现 js确实小了挺多，那么这些这些内容去哪了？我们也没有删除啊",-1),fn=s("p",null,[s("img",{src:"http://ww1.sinaimg.cn/large/6af89bc8gw1f8u55co8s8j205i05b3yb.jpg",alt:""})],-1),vn=s("p",null,"在js文件夹中，我们发现了好多个单个js，这是为什么呢？",-1),wn=s("p",null,[a("因为用 "),s("code",null,"require"),a(" 会将 "),s("code",null,"component"),a(" 分别打包成不同的js，按需加载，访问此路由时才会加载这个js，所以就避免进入首页时加载内容过多。")],-1),jn=s("p",null,[s("img",{src:"/blog/_assets/image-20201229162241521.39f36ee4.png",alt:""})],-1),yn=s("p",null,"所噶，到此为止我们优化做完了。我们来看看效果吧!",-1),_n=s("p",null,[s("img",{src:"http://ww1.sinaimg.cn/large/9150e4e5ly1fhbqlltmdij203502ot8k.jpg",alt:""})],-1),xn=s("h2",{id:"结果"},[s("a",{class:"header-anchor",href:"#结果","aria-hidden":"true"},"#"),a(" 结果")],-1),zn=s("p",null,"来看看效果吧！",-1),qn=s("p",null,[s("img",{src:"/blog/_assets/image-20201229162548701.c8d57e11.png",alt:""})],-1),Pn=s("p",null,"有些仔细的朋友会发现，这个app.js 与 vendor.js 怎么会变得比刚刚还小呢？",-1),Sn=s("p",null,"因为我们得第一步压缩代码里面做了 gzip 压缩",-1),Mn=s("p",null,[s("img",{src:"/blog/_assets/image-20201229162905878.a13fcc63.png",alt:""})],-1),An=s("p",null,"现在首屏打开基本上控制在 1-3s 左右浮动了",-1),Cn=s("p",null,"相比之前的 16s 简直不要强太多，PM 与 老板 直呼 “这也太快了！啊啊啊~”",-1),Dn=s("p",null,[s("img",{src:"http://ww4.sinaimg.cn/large/9150e4e5ly1fq6s1rt3zxj20c80c8gly.jpg",alt:""})],-1);o.render=function(a,e,o,In,On,Un){const Vn=l("Comment");return t(),n("div",null,[p,c,u,i,r,k,g,d,m,h,b,f,v,w,j,y,_,x,z,q,P,S,M,A,C,D,I,O,U,V,R,E,G,J,N,W,F,T,Y,$,B,H,K,L,Q,X,Z,nn,sn,an,tn,ln,en,on,pn,cn,un,rn,kn,gn,dn,mn,hn,bn,fn,vn,wn,jn,yn,_n,xn,zn,qn,Pn,Sn,Mn,An,Cn,Dn,s(Vn)])};export default o;export{e as __pageData};
